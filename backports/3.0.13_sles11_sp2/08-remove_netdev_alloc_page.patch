diff -rup a/drivers/net/ethernet/chelsio/cxgb4/sge.c b/drivers/net/ethernet/chelsio/cxgb4/sge.c
--- a/drivers/net/ethernet/chelsio/cxgb4/sge.c	2012-05-21 13:17:11.000000000 -0400
+++ b/drivers/net/ethernet/chelsio/cxgb4/sge.c	2012-05-21 13:19:06.000000000 -0400
@@ -528,7 +528,7 @@ static unsigned int refill_fl(struct ada
 #endif
 
 	while (n--) {
-		pg = __netdev_alloc_page(adap->port[0], gfp);
+		pg = alloc_pages(gfp, 0);
 		if (unlikely(!pg)) {
 			q->alloc_failed++;
 			break;
